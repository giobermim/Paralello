{"version":3,"sources":["turbopack:///[project]/components/dashboard-sidebar.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/app/agenda/resumos/shared-notes-list.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/app/agenda/resumos/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DashboardSidebar = registerClientReference(\n    function() { throw new Error(\"Attempted to call DashboardSidebar() from the server but DashboardSidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/dashboard-sidebar.tsx\",\n    \"DashboardSidebar\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SharedNotesList = registerClientReference(\n    function() { throw new Error(\"Attempted to call SharedNotesList() from the server but SharedNotesList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/agenda/resumos/shared-notes-list.tsx\",\n    \"SharedNotesList\",\n);\n","import { createServerClient, createServiceRoleClient } from \"@/utils/supabase/server\"\nimport { redirect } from \"next/navigation\"\nimport { cookies } from \"next/headers\"\nimport { SharedNotesList } from \"./shared-notes-list\"\nimport { DashboardSidebar } from \"@/components/dashboard-sidebar\"\n\nconst BYPASS_COOKIE_NAME = \"bypass_user\"\n\nexport default async function ResumosCompartilhadosPage() {\n  const cookieStore = await cookies()\n  const bypassCookie = cookieStore.get(BYPASS_COOKIE_NAME)\n  const isBypassUser = bypassCookie?.value === \"menardiph@gmail.com\"\n\n  const supabase = await createServerClient()\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (!user && !isBypassUser) {\n    redirect(\"/login\")\n  }\n\n  const supabaseAdmin = await createServiceRoleClient()\n\n  const { data: publicNotes } = await supabaseAdmin\n    .from(\"anotacao\")\n    .select(`\n      *,\n      disciplina(disciplina_id, disciplina_nome, disciplina_cor)\n    `)\n    .eq(\"anotacao_publica\", true)\n    .order(\"anotacao_publicacao\", { ascending: false })\n\n  // Get unique user IDs from notes\n  const userIds = [...new Set(publicNotes?.map((note) => note.usuario_id).filter(Boolean))]\n\n  // Fetch user profiles\n  const { data: userProfiles } = await supabaseAdmin\n    .from(\"perfil_usuario\")\n    .select(\"usuario_id, perfil_nome, perfil_foto\")\n    .in(\"usuario_id\", userIds)\n\n  // Create a map for quick lookup\n  const profileMap = new Map(userProfiles?.map((profile) => [profile.usuario_id, profile]) || [])\n\n  // Combine notes with user profiles\n  const notesWithProfiles =\n    publicNotes?.map((note) => ({\n      ...note,\n      perfil_usuario: profileMap.get(note.usuario_id) || null,\n    })) || []\n\n  const { data: disciplinas } = await supabaseAdmin\n    .from(\"disciplina\")\n    .select(\"*\")\n    .order(\"disciplina_nome\", { ascending: true })\n\n  return (\n    <div className=\"flex h-screen overflow-hidden bg-[rgba(1,176,255,1)]\">\n      <DashboardSidebar activePage=\"Resumos Compartilhados\" />\n\n      <main className=\"flex-1 p-4 overflow-hidden\">\n        <div className=\"h-full overflow-hidden\">\n          <div className=\"rounded-3xl bg-background p-6 shadow-lg h-full overflow-hidden flex flex-col\">\n            <div className=\"flex-1 flex flex-col min-h-0\">\n              <div className=\"mb-4 flex-shrink-0\">\n                <h1 className=\"text-xl font-bold\">Resumos Compartilhados</h1>\n                <p className=\"text-sm text-muted-foreground\">\n                  Explore resumos p√∫blicos compartilhados por outros estudantes\n                </p>\n              </div>\n              <div className=\"flex-1 overflow-auto\">\n                <SharedNotesList publicNotes={notesWithProfiles} availableDisciplinas={disciplinas || []} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1]}