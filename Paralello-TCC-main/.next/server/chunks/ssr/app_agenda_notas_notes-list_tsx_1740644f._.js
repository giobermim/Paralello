module.exports=[48866,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(15618),f=a.i(4720),g=a.i(70106);let h=(0,g.default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var i=a.i(65733),j=a.i(5522),k=a.i(17171),l=a.i(46893),m=a.i(80281),n=a.i(87682),o=a.i(5050),p=(0,o.createServerReference)("40f5d239e041f3289cd02652cc7af3c5810601d380",o.callServer,void 0,o.findSourceMapURL,"createNote"),q=(0,o.createServerReference)("60d262038cf17a0ed95ef14d68cfa75f2d054cbab6",o.callServer,void 0,o.findSourceMapURL,"updateNote"),r=(0,o.createServerReference)("40e7053005016844e327abacfcbaff9f8381dba895",o.callServer,void 0,o.findSourceMapURL,"deleteNote"),s=a.i(70246),t=a.i(96221),u=a.i(81560);let v=(0,g.default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function w({isOpen:a,onClose:e,note:f,availableDisciplinas:g}){let[h,o]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),{toast:K}=(0,s.useToast)(),L=g.filter((a,b,c)=>b===c.findIndex(b=>b.disciplina_nome===a.disciplina_nome));(0,c.useEffect)(()=>{f?(x(f.anotacao_titulo),z(f.anotacao_texto||""),B(f.anotacao_descricao||""),D(f.disciplina_id?.toString()||null),F(f.anotacao_publica||!1)):M()},[f,a]);let M=()=>{x(""),z(""),B(""),D(null),F(!1),H(!1),J(!1)},N=async a=>{if(a.preventDefault(),!w.trim())return void K({title:"Erro",description:"O título é obrigatório",variant:"destructive"});if(!A.trim())return void K({title:"Erro",description:"A descrição é obrigatória",variant:"destructive"});o(!0);let b=new FormData;b.append("titulo",w.trim()),b.append("descricao",A.trim()),b.append("texto",y),b.append("publica",String(E)),C&&b.append("disciplina_id",C);try{let a;if((a=f?await q(f.anotacao_id.toString(),b):await p(b)).error)throw Error(a.error);J(!0),setTimeout(()=>{J(!1),M(),e(),window.location.reload()},1500)}catch(a){console.log("[v0] Error saving note:",a),K({title:"Erro",description:a instanceof Error?a.message:"Erro ao salvar nota",variant:"destructive"})}finally{o(!1)}},O=async()=>{if(f){o(!0);try{let a=await r(f.anotacao_id.toString());if(a.error)throw Error(a.error);K({title:"Sucesso",description:"Nota removida com sucesso"}),e(),window.location.reload()}catch(a){K({title:"Erro",description:"Erro ao remover nota",variant:"destructive"})}finally{o(!1)}}};return I?(0,b.jsx)(i.Dialog,{open:a,onOpenChange:e,children:(0,b.jsx)(i.DialogContent,{className:"sm:max-w-[400px]",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 text-center space-y-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center",children:(0,b.jsx)(v,{className:"h-6 w-6 text-green-600"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Nota Salva!"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:E?"Obrigado por contribuir com a nossa comunidade!":"Sua nota foi salva com sucesso."})]})})}):(0,b.jsx)(i.Dialog,{open:a,onOpenChange:e,children:(0,b.jsx)(i.DialogContent,{className:"max-w-[98vw] w-[1600px] h-[90vh] p-0 flex flex-col overflow-hidden",children:(0,b.jsxs)("div",{className:"flex gap-0 h-full",children:[(0,b.jsxs)("div",{className:"flex-1 flex flex-col space-y-4 p-8 overflow-y-auto min-w-0",children:[(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsx)(j.Input,{value:w,onChange:a=>x(a.target.value),placeholder:"Título da nota",className:"text-3xl font-bold border-none px-0 focus-visible:ring-0 h-16"})}),(0,b.jsx)("div",{className:"flex-1 min-h-0",children:(0,b.jsx)(l.Textarea,{value:y,onChange:a=>z(a.target.value),placeholder:"Comece a escrever...",className:"h-full border-none px-0 focus-visible:ring-0 resize-none text-lg leading-relaxed"})})]}),(0,b.jsxs)("div",{className:"w-[220px] flex-shrink-0 flex flex-col space-y-3 border-l bg-muted/30 p-3 overflow-y-auto",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h3",{className:"font-semibold text-xs",children:"Configurações Gerais"})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(k.Label,{className:"text-[10px] font-medium",children:"Tag por Matéria"}),(0,b.jsxs)(n.Select,{value:C||"",onValueChange:a=>D(a),children:[(0,b.jsx)(n.SelectTrigger,{className:"w-full h-8 text-xs",children:(0,b.jsx)(n.SelectValue,{placeholder:"Selecione"})}),(0,b.jsx)(n.SelectContent,{children:L.map(a=>(0,b.jsx)(n.SelectItem,{value:a.disciplina_id.toString(),children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.disciplina_cor}}),(0,b.jsx)("span",{style:{color:a.disciplina_cor},className:"font-medium text-xs",children:a.disciplina_nome})]})},a.disciplina_id))})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(k.Label,{className:"text-[10px] font-medium",children:"Descrição*"}),(0,b.jsx)(l.Textarea,{value:A,onChange:a=>B(a.target.value),placeholder:"Breve descrição...",maxLength:300,className:"min-h-[60px] text-xs resize-none"}),(0,b.jsxs)("p",{className:"text-[9px] text-muted-foreground text-right",children:[A.length,"/300"]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(k.Label,{className:"text-[10px] font-medium",children:"Publicar?"}),(0,b.jsx)(m.Switch,{checked:E,onCheckedChange:F,className:"scale-75"})]}),(0,b.jsx)("p",{className:"text-[9px] text-muted-foreground",children:E?"Pública":"Privada"})]})]}),(0,b.jsx)("div",{className:"flex-1"}),G?(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,b.jsx)("div",{className:"h-5 w-5 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(u.Trash2,{className:"h-2.5 w-2.5 text-red-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-[10px]",children:"Deletar?"}),(0,b.jsx)("p",{className:"text-[9px] text-muted-foreground",children:"Ação irreversível"})]})]}),(0,b.jsxs)("div",{className:"flex gap-1.5",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>H(!1),className:"flex-1 text-[10px] h-7",children:"Não"}),(0,b.jsx)(d.Button,{variant:"destructive",onClick:O,disabled:h,className:"flex-1 text-[10px] h-7",children:h?(0,b.jsx)(t.Loader2,{className:"h-2.5 w-2.5 animate-spin"}):"Sim"})]})]}):(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)(d.Button,{className:"w-full bg-[#FC1F69] hover:bg-[#FC1F69]/90 text-white text-[10px] h-8 font-medium",onClick:N,disabled:h,children:[h?(0,b.jsx)(t.Loader2,{className:"mr-1 h-3 w-3 animate-spin"}):null,"Salvar Nota"]}),(0,b.jsx)(d.Button,{variant:"outline",className:"w-full text-[10px] h-8 bg-transparent",onClick:e,children:"Cancelar"}),f&&(0,b.jsxs)(d.Button,{variant:"ghost",className:"w-full text-red-500 hover:text-red-600 hover:bg-red-50 text-[10px] h-7",onClick:()=>H(!0),children:[(0,b.jsx)(u.Trash2,{className:"h-2.5 w-2.5 mr-1"}),"Deletar"]})]})]})]})})})}var x=a.i(46413),y=a.i(3130),z=a.i(54161),A=a.i(7554),B=a.i(50104),C=a.i(24050),D=a.i(77192),E=a.i(30553),F=a.i(7827),G=a.i(25152),H=a.i(92843),I="Tabs",[J,K]=(0,B.createContextScope)(I,[C.createRovingFocusGroupScope]),L=(0,C.createRovingFocusGroupScope)(),[M,N]=J(I),O=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:j="automatic",...k}=a,l=(0,F.useDirection)(i),[m,n]=(0,G.useControllableState)({prop:e,onChange:f,defaultProp:g});return(0,b.jsx)(M,{scope:d,baseId:(0,H.useId)(),value:m,onValueChange:n,orientation:h,dir:l,activationMode:j,children:(0,b.jsx)(E.Primitive.div,{dir:l,"data-orientation":h,...k,ref:c})})});O.displayName=I;var P="TabsList",Q=c.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...f}=a,g=N(P,d),h=L(d);return(0,b.jsx)(C.Root,{asChild:!0,...h,orientation:g.orientation,dir:g.dir,loop:e,children:(0,b.jsx)(E.Primitive.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:c})})});Q.displayName=P;var R="TabsTrigger",S=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,disabled:f=!1,...g}=a,h=N(R,d),i=L(d),j=V(h.baseId,e),k=W(h.baseId,e),l=e===h.value;return(0,b.jsx)(C.Item,{asChild:!0,...i,focusable:!f,active:l,children:(0,b.jsx)(E.Primitive.button,{type:"button",role:"tab","aria-selected":l,"aria-controls":k,"data-state":l?"active":"inactive","data-disabled":f?"":void 0,disabled:f,id:j,...g,ref:c,onMouseDown:(0,A.composeEventHandlers)(a.onMouseDown,a=>{f||0!==a.button||!1!==a.ctrlKey?a.preventDefault():h.onValueChange(e)}),onKeyDown:(0,A.composeEventHandlers)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&h.onValueChange(e)}),onFocus:(0,A.composeEventHandlers)(a.onFocus,()=>{let a="manual"!==h.activationMode;l||f||!a||h.onValueChange(e)})})})});S.displayName=R;var T="TabsContent",U=c.forwardRef((a,d)=>{let{__scopeTabs:e,value:f,forceMount:g,children:h,...i}=a,j=N(T,e),k=V(j.baseId,f),l=W(j.baseId,f),m=f===j.value,n=c.useRef(m);return c.useEffect(()=>{let a=requestAnimationFrame(()=>n.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(D.Presence,{present:g||m,children:({present:c})=>(0,b.jsx)(E.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":k,hidden:!c,id:l,tabIndex:0,...i,ref:d,style:{...a.style,animationDuration:n.current?"0s":void 0},children:c&&h})})});function V(a,b){return`${a}-trigger-${b}`}function W(a,b){return`${a}-content-${b}`}U.displayName=T;var X=a.i(97895);function Y({className:a,...c}){return(0,b.jsx)(O,{"data-slot":"tabs",className:(0,X.cn)("flex flex-col gap-2",a),...c})}function Z({className:a,...c}){return(0,b.jsx)(Q,{"data-slot":"tabs-list",className:(0,X.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...c})}function $({className:a,...c}){return(0,b.jsx)(S,{"data-slot":"tabs-trigger",className:(0,X.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...c})}function _({className:a,...c}){return(0,b.jsx)(U,{"data-slot":"tabs-content",className:(0,X.cn)("flex-1 outline-none",a),...c})}var aa=(0,o.createServerReference)("60ea940d6ae925c904ebe486b0f31d8bc20a3897c8",o.callServer,void 0,o.findSourceMapURL,"toggleFavorite");function ab({initialNotes:a,availableDisciplinas:g}){let[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(new Set(a.filter(a=>a.anotacao_favoritar).map(a=>a.anotacao_id))),[r,s]=(0,c.useState)("all"),t=()=>{o(null),j(!0)},u=async(a,b)=>{b.stopPropagation();let c=p.has(a),d=new Set(p);c?d.delete(a):d.add(a),q(d),await aa(a.toString(),!c)},v=a.filter(a=>p.has(a.anotacao_id)),A=a=>"all"===r?a:a.filter(a=>a.disciplina_id?.toString()===r),B=A(a),C=A(v),D=g.filter((a,b,c)=>b===c.findIndex(b=>b.disciplina_nome===a.disciplina_nome)),E=a=>(0,b.jsxs)(y.Card,{className:"h-[140px] cursor-pointer hover:shadow-lg transition-all relative overflow-hidden group",onClick:()=>{o(a),l(!0)},style:{borderLeft:`4px solid ${a.disciplina?.disciplina_cor||"#E5E7EB"}`},children:[(0,b.jsxs)(y.CardHeader,{className:"pb-1.5 px-3 pt-2",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsx)(y.CardTitle,{className:"line-clamp-1 text-sm",style:{color:a.disciplina?.disciplina_cor||"inherit"},children:a.anotacao_titulo}),(0,b.jsx)("button",{onClick:b=>u(a.anotacao_id,b),className:"flex-shrink-0 p-0.5 rounded hover:bg-accent transition-colors",children:(0,b.jsx)(h,{className:`h-3.5 w-3.5 ${p.has(a.anotacao_id)?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`})})]}),a.disciplina&&(0,b.jsx)(z.Badge,{variant:"secondary",className:"text-[10px] px-1.5 py-0 h-4 w-fit mt-1",style:{backgroundColor:`${a.disciplina.disciplina_cor}20`,color:a.disciplina.disciplina_cor},children:a.disciplina.disciplina_nome})]}),(0,b.jsxs)(y.CardContent,{className:"px-3 pb-2",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-1.5",children:a.anotacao_descricao||"Sem descrição"}),a.anotacao_publica&&(0,b.jsx)(z.Badge,{variant:"outline",className:"text-[10px] h-4 px-1.5",children:"Pública"})]})]},a.anotacao_id);return 0===a.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-3 bg-white rounded-lg border border-dashed p-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:(0,b.jsx)(f.FileText,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h3",{className:"text-base font-semibold",children:"Nenhuma nota encontrada"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground max-w-sm",children:"Você ainda não criou nenhuma nota. Comece criando sua primeira nota para organizar seus estudos."})]}),(0,b.jsxs)(d.Button,{onClick:t,size:"sm",className:"gap-2 text-xs h-8",children:[(0,b.jsx)(e.Plus,{className:"h-3.5 w-3.5"}),"Criar nota"]}),(0,b.jsx)(w,{isOpen:i,onClose:()=>j(!1),note:m,availableDisciplinas:g})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(Y,{defaultValue:"all",className:"w-full h-full flex flex-col overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-shrink-0",children:[(0,b.jsxs)(Z,{className:"h-8 flex-shrink-0",children:[(0,b.jsx)($,{value:"all",className:"text-xs h-7",children:"Todas as Notas"}),(0,b.jsxs)($,{value:"favorites",className:"gap-1.5 text-xs h-7",children:[(0,b.jsx)(h,{className:"h-3 w-3"}),"Favoritos (",v.length,")"]})]}),(0,b.jsxs)(n.Select,{value:r,onValueChange:s,children:[(0,b.jsx)(n.SelectTrigger,{className:"w-[180px] h-8 text-xs",children:(0,b.jsx)(n.SelectValue,{placeholder:"Filtrar por matéria"})}),(0,b.jsxs)(n.SelectContent,{children:[(0,b.jsx)(n.SelectItem,{value:"all",className:"text-xs",children:"Todas as matérias"}),D.map(a=>(0,b.jsx)(n.SelectItem,{value:a.disciplina_id.toString(),className:"text-xs",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.disciplina_cor}}),(0,b.jsx)("span",{style:{color:a.disciplina_cor},className:"font-medium",children:a.disciplina_nome})]})},a.disciplina_id))]})]})]}),(0,b.jsx)(_,{value:"all",className:"mt-0 flex-1 overflow-auto",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:[(0,b.jsxs)(d.Button,{variant:"outline",className:"h-[140px] flex flex-col gap-2 border-dashed border-2 hover:border-primary hover:bg-primary/5 bg-transparent",onClick:t,children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(e.Plus,{className:"h-4 w-4 text-primary"})}),(0,b.jsx)("span",{className:"font-medium text-xs",children:"Criar nova nota"})]}),B.map(E)]})}),(0,b.jsx)(_,{value:"favorites",className:"mt-0 flex-1 overflow-auto",children:0===C.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center space-y-2",children:[(0,b.jsx)(h,{className:"h-10 w-10 text-muted-foreground/30"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold",children:"all"===r?"Nenhuma nota favorita":"Nenhuma nota favorita nesta matéria"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"all"===r?"Clique na estrela das notas para adicioná-las aos favoritos":"Tente selecionar outra matéria ou adicione notas aos favoritos"})]})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:C.map(E)})})]}),(0,b.jsx)(x.NoteViewDialog,{isOpen:k,onClose:()=>l(!1),note:m,onEdit:()=>{l(!1),j(!0)}}),(0,b.jsx)(w,{isOpen:i,onClose:()=>j(!1),note:m,availableDisciplinas:g})]})}a.s(["NotesList",()=>ab],48866)}];

//# sourceMappingURL=app_agenda_notas_notes-list_tsx_1740644f._.js.map