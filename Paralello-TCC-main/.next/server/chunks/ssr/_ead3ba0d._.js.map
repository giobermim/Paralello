{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","turbopack:///[project]/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts","turbopack:///[project]/app/agenda/teste-vocacional/actions.ts","turbopack:///[project]/.next-internal/server/app/fazer-teste/page/actions.js (server actions loader)"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n","\"use server\"\n\nimport { createServerClient } from \"@/utils/supabase/server\"\n\nconst BYPASS_USER_ID = \"00000000-0000-0000-0000-000000000000\"\n\n// Mapeamento das áreas para os nomes no banco de dados\nconst areaNames: Record<string, string> = {\n  \"logico-matematica\": \"Ciências Exatas e Tecnologia\",\n  linguistica: \"Comunicação e Letras\",\n  espacial: \"Artes, Design e Arquitetura\",\n  \"corporal-cinestesica\": \"Educação Física e Saúde\",\n  musical: \"Música e Artes Cênicas\",\n  interpessoal: \"Ciências Humanas e Sociais\",\n  intrapessoal: \"Filosofia e Autoconhecimento\",\n  naturalista: \"Ciências Biológicas e Meio Ambiente\",\n  existencial: \"Filosofia e Ciências Humanas\",\n}\n\nexport interface TestResults {\n  \"logico-matematica\": number\n  linguistica: number\n  espacial: number\n  \"corporal-cinestesica\": number\n  musical: number\n  interpessoal: number\n  intrapessoal: number\n  naturalista: number\n  existencial: number\n}\n\nexport async function saveTestResults(results: TestResults) {\n  const supabase = await createServerClient()\n\n  // Obter o usuário atual\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n  const userId = user?.id || BYPASS_USER_ID\n\n  const { data: existingTest } = await supabase.from(\"teste\").select(\"teste_id\").eq(\"usuario_id\", userId).maybeSingle()\n\n  const testData = {\n    usuario_id: userId,\n    teste_area1: areaNames[\"logico-matematica\"],\n    teste_porcentagem1: results[\"logico-matematica\"],\n    teste_area2: areaNames[\"linguistica\"],\n    teste_porcentagem2: results[\"linguistica\"],\n    teste_area3: areaNames[\"espacial\"],\n    teste_porcentagem3: results[\"espacial\"],\n    teste_area4: areaNames[\"corporal-cinestesica\"],\n    teste_porcentagem4: results[\"corporal-cinestesica\"],\n    teste_area5: areaNames[\"musical\"],\n    teste_porcentagem5: results[\"musical\"],\n    teste_area6: areaNames[\"interpessoal\"],\n    teste_porcentagem6: results[\"interpessoal\"],\n    teste_area7: areaNames[\"intrapessoal\"],\n    teste_porcentagem7: results[\"intrapessoal\"],\n    teste_area8: areaNames[\"naturalista\"],\n    teste_porcentagem8: results[\"naturalista\"],\n    teste_area9: areaNames[\"existencial\"],\n    teste_porcentagem9: results[\"existencial\"],\n  }\n\n  if (existingTest) {\n    // Atualizar resultado existente\n    const { error } = await supabase.from(\"teste\").update(testData).eq(\"teste_id\", existingTest.teste_id)\n\n    if (error) {\n      console.error(\"Error updating test results:\", error)\n      return { success: false, error: error.message }\n    }\n  } else {\n    // Inserir novo resultado\n    const { error } = await supabase.from(\"teste\").insert(testData)\n\n    if (error) {\n      console.error(\"Error saving test results:\", error)\n      return { success: false, error: error.message }\n    }\n  }\n\n  return { success: true }\n}\n\nexport async function getTestResults() {\n  const supabase = await createServerClient()\n\n  // Obter o usuário atual\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n  const userId = user?.id || BYPASS_USER_ID\n\n  const { data, error } = await supabase.from(\"teste\").select(\"*\").eq(\"usuario_id\", userId).maybeSingle()\n\n  if (error) {\n    console.error(\"Error fetching test results:\", error)\n    return { success: false, data: null }\n  }\n\n  if (!data) {\n    // No test results found for this user - this is normal, not an error\n    return { success: true, data: null }\n  }\n\n  // Converter de volta para o formato do frontend\n  const results: TestResults = {\n    \"logico-matematica\": data.teste_porcentagem1,\n    linguistica: data.teste_porcentagem2,\n    espacial: data.teste_porcentagem3,\n    \"corporal-cinestesica\": data.teste_porcentagem4,\n    musical: data.teste_porcentagem5,\n    interpessoal: data.teste_porcentagem6,\n    intrapessoal: data.teste_porcentagem7,\n    naturalista: data.teste_porcentagem8,\n    existencial: data.teste_porcentagem9,\n  }\n\n  return { success: true, data: results }\n}\n\nexport async function deleteTestResults() {\n  const supabase = await createServerClient()\n\n  // Obter o usuário atual\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n  const userId = user?.id || BYPASS_USER_ID\n\n  const { error } = await supabase.from(\"teste\").delete().eq(\"usuario_id\", userId)\n\n  if (error) {\n    console.error(\"Error deleting test results:\", error)\n    return { success: false, error: error.message }\n  }\n\n  return { success: true }\n}\n","export {saveTestResults as '40a138e4531214d56f932ad34704feda2ae251c9ac'} from 'ACTIONS_MODULE0'\n"],"names":["registerServerReference","ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"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","ignoreList":[0,1]}